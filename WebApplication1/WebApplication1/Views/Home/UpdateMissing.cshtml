<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard</title>
    <link rel="stylesheet" href="~/css/CreateMissing.css" />
</head>
<body>
    <header class="header">
        <div class="logo">
            <img src="~/images/logo.png" alt="Logo" />
            <div class="logo-text">
                <h1 class="logoName">San Bartolome Barangay Hall</h1>
                <h2 class="logoSubtitle">Barangay Risk Reduction Management System</h2>
            </div>
        </div>
    </header>

    <div class="body">
        <div class="nav-container">
            <div class="nav-bar">
                <div class="nav-item">
                    <a href="/Index" class="@(ViewData["ActivePage"]?.ToString() == "Dashboard" ? "active" : "")">Dashboard</a>
                </div>
                <div class="nav-item">
                    <a href="/Index/Mapping" class="@(ViewData["ActivePage"]?.ToString() == "Mapping" ? "active" : "")">Risk Mapping</a>
                </div>
                <div class="nav-item">
                    <a href="/Index/Missing" class="@(ViewData["ActivePage"]?.ToString() == "Missing" ? "active" : "")">Missing Report</a>
                </div>
                <div class="nav-item">
                    <a href="/Index/Evacuess" class="@(ViewData["ActivePage"]?.ToString() == "Evacuess" ? "active" : "")">Evacuess</a>
                </div>
            </div>
        </div>

        <div class="modal-body">
            <h2>Update Missing Report</h2>

            <form method="post" enctype="multipart/form-data" asp-controller="Index" asp-action="UpdateMissing">
                @Html.AntiForgeryToken()
                <!-- Hidden input to track the record -->
                <input type="hidden" name="Id" value="@Model.Id" />

                <div>
                    <label for="Name">Full Name</label>
                    <input type="text" id="Name" name="Name" value="@Model.Name" required />
                </div>

                <div>
                    <label for="DateMissing">Date Missing</label>
                    <input type="date" id="DateMissing" name="DateMissing" value="@Model.DateMissing.ToString("yyyy-MM-dd")" required />
                </div>

                <div>
                    <label for="Age">Age</label>
                    <input type="number" id="Age" name="Age" value="@Model.Age" required />
                </div>

                <div>
                    <label for="Gender">Gender</label>
                    <input type="text" id="Gender" name="Gender" value="@Model.Gender" required />
                </div>

                <div>
                    <label for="LastSeenLocation">Last Seen Location</label>
                    <input type="text" id="LastSeenLocation" name="LastSeenLocation" value="@Model.LastSeenLocation" required />
                </div>

                <div>
                    <label for="Address">Address</label>
                    <input type="text" id="Address" name="Address" value="@Model.Address" required />
                </div>

                <div>
                    <label for="Description">Description</label>
                    <textarea id="Description" name="Description" rows="2" required>@Model.Description</textarea>
                </div>

                <div>
                    <label for="ContactNumber">Contact Number</label>
                    <input type="text" id="ContactNumber" name="ContactNumber" value="@Model.ContactNumber" required />
                </div>

                <div>
                    <label for="Status">Status</label>
                    <select id="Status" name="Status">
                        <option value="Missing" @(Model.Status == "Missing" ? "selected" : "")>Missing</option>
                        <option value="Found" @(Model.Status == "Found" ? "selected" : "")>Found</option>
                    </select>
                </div>

                <div>
                    <label>
                        Upload Photo
                        <input type="file" name="PhotoFile" />
                        @if (!string.IsNullOrEmpty(Model.PhotoUrl))
                        {
                            <p>Current: <img src="~/uploads/@Model.PhotoUrl" alt="Photo" width="100" /></p>
                        }
                    </label>
                </div>

                <button type="submit" class="submit-btn">Update</button>
                <a href="/Index/Missing" class="cancel-btn">Cancel</a>
            </form>
        </div>
</body>
</html>